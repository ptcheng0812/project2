<%- contentFor('styles') %>
<style>
  h2{
  color: #333333;
  font-family: 'Courier New', monospace;
  }

  .col-sm-6{
    margin: 20px;
  }

  .card-body{
    display: flex;
    justify-content: space-between;
  }

  .footer-dark {
  bottom: 0px;
  left: 0px;
  right: 0px;
  position: fixed;
  }
</style>
<%- contentFor('scripts') %>
<script>
    $(document).ready(function() {
    const setModal = function(html) {
      const $modal = $('#modal')
      const $modalContent = $modal.find('.modal-content')
      $modal.modal('show')
      $modalContent.html(html)
    }

    const setLoadingModal = function() {
      setModal(`
        <div class="modal-header">
          <h5 class="modal-title">Loading</h5>
          <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
        </div>
        <div class="modal-body">
          <div class="text-center">
            <i class="fas fa-spinner fa-spin"></i>
          </div>
        </div>
      `)
    }

    $('#list-group').on('click', '.show-user-btn', function(e) {
      e.preventDefault()
      const $elem = $(e.target)
      const url = $elem.data('url')
      const method = $elem.data('method')
      axios({ method, url }).then(function(resp) {
        setModal(resp.data)
      })
    })
  })
</script>
<%- contentFor('body') %>
<h2>Users</h2>

<%- include('_partials/filter') %>

<div id="list-group" class="row">
  <% if (users.length > 0) { %>
    <% users.forEach(function(user){ %>
      <div class="col-sm-4">
        <div class="card">
          <div class="card-body">
            <% if (user.avatar !== null) { %>
              <img  class="user-avatar-view"
                    src="<%= user.avatar %>"
                    alt="avatar"
                    style="height:100px; width:100px;"
              >
            <% } %>
            <h3 class="show-btn font-weight-bold"><%= user.name %></h3>
            <button class="show-user-btn btn-primary" data-url="/api/userprofile/<%= user.id %>" data-method="GET">Info</button>
          </div>
        </div>
      </div>
    <% }) %>
    <% } %>
  </div>

<%- include('_partials/pagination') %>
